language: java

install:
- ./build-submodules.sh
- mvn clean install -Dmaven.test.skip=true -Dmaven.javadoc.skip=true -B -V

jobs:
  include:
    - stage: test
      jdk: openjdk8
      script: mvn -q verify

    - stage: deploy
      if: repo = JarvisCraft/minecraft-utils AND type != pull_request
      jdk: openjdk8
      script: ./deploy.sh

# Cached directories
cache:
  directories:
  - ~/.m2/repository
